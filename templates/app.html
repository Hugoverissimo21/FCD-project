<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Where News Meets Curiosity</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .tabs { display: flex; margin-bottom: 20px; }
        .tab { padding: 10px 20px; cursor: pointer; border: 1px solid #ccc; }
        .tab:hover { background-color: #f0f0f0; }
        .tab-content { padding: 20px; border: 1px solid #ccc; }
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .button-left,
        .button-right {
            margin: 0 10px;
        }
        .button-left:disabled,
        .button-right:disabled {
            background-color: #e0e0e0;
            color: #aaa;
            cursor: not-allowed;
        }
        .text-center {
            flex-grow: 1;
            text-align: center;
        }
    </style>
</head>
<body>

<div class="tabs">
    <div class="tab" onclick="showTab('graph')">Graph</div>
    <div class="tab" onclick="showTab('readexplore')">Read & Explore</div>
    <div class="tab" onclick="showTab('hilo')">Word Wars</div>
</div>

<div class="tab-content" id="graph" style="display:none;">
    <embed src="https://hugoverissimo21.github.io/FCD-project/assets/graph_bcp.html" style="width:100%; height: 100vh;">
</div>



<div class="tab-content" id="hilo">
    <h3>Word Wars</h3>
    
    {% if not word1 %}
        <form action="/hiloH_start" method="POST">
            <button type="submit">Start Game</button>
        </form>
    {% else %}
        <p>Word 1: {{ word1 }}</p>
        <p>Word 1: {{ word1_mentions }}</p>
        <p>Word 2: {{ word2 }}</p>
        {% if word2_mentions_ans %}
            <p>Word 2: {{ word2_mentions_ans }}</p>
        {% endif %}
        {% if score is not none %}
            <p>Score: {{ score }}</p>
        {% endif %}
    {% endif %}

    {% if playable %}
    <form action="/hiloH" method="POST">
        <button type="submit" name="choice" value="more">Higher</button>
        <button type="submit" name="choice" value="less">Lower</button>
    </form>
    {% endif %}

    {% if winner %}
        <p>{{ winner }}</p>
    {% endif %}
    {% if loser %}
        <p>{{ loser }}</p>
        <form action="/hiloH_restart" method="POST">
            <button type="submit">New Game?</button>
        </form>
    {% endif %}
</div>



<div class="tab-content" id="readexplore">
    {% if not not_first_new %}
        <form action="/get_first_news" method="POST">
            <button type="submit">Start Reading</button>
        </form>
    {% endif %}
    {% if new_to_read %}
        {% if current %}
            <form action="/rate_news" method="POST">
                <button type="submit" name="rating4new" value="1">1</button>
                <button type="submit" name="rating4new" value="2">2</button>
                <button type="submit" name="rating4new" value="3">3</button>
                <button type="submit" name="rating4new" value="4">4</button>
                <button type="submit" name="rating4new" value="5">5</button>
                <button type="submit" name="rating4new" value="-1">Skip</button>
            </form>
        {% endif %}
        <form action="/news_history" method="POST" class="nav-container">
            <button 
              type="submit" 
              name="news_hist" 
              value="prev" 
              class="button-left"
              {% if no_more_left %} disabled {% endif %}
            >
              prev
            </button>
            
            <p class="text-center">Source: {{ new_to_read }}</p>
            
            <button 
              type="submit" 
              name="news_hist" 
              value="next" 
              class="button-right"
              {% if no_more_right %} disabled {% endif %}
            >
              next
            </button>
        </form>
        <iframe src="{{ new_to_read }}" style="width: 100%; height: 100vh;">
            Loading, please wait...
        </iframe>
    {% endif %}
</div>

<script>
    function showTab(tabName) {
        // Hide all tabs
        const tabs = document.querySelectorAll('.tab-content');
        tabs.forEach(tab => tab.style.display = 'none');

        // Show the selected tab
        document.getElementById(tabName).style.display = 'block';

        // Store the selected tab in localStorage
        localStorage.setItem('lastTab', tabName);
    }

    // Retrieve the last tab from localStorage
    const lastTab = localStorage.getItem('lastTab') || 'graph';
    showTab(lastTab);
</script>

</body>
</html>
